kuma_url = "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxMTEhUTExMVFRUXFRUXFxgVFxUVFhgXFxcWFxUVFRUYHSggGBolHRUXITEhJSkrLi4uGB8zODMtNygtLisBCgoKDg0OGhAQGi0lHyUtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLf/AABEIALcBEwMBIgACEQEDEQH/xAAbAAABBQEBAAAAAAAAAAAAAAAFAAIDBAYBB//EADsQAAEDAgQDBQcDAwQCAwAAAAEAAhEDIQQSMUEFUWEGInGBkRMyobHB0fAUQvFSYuEHI3KCkrIVovL/xAAYAQADAQEAAAAAAAAAAAAAAAAAAQIDBP/EACARAQEAAgIDAAMBAAAAAAAAAAABAhEhMQMSQSJRYRP/2gAMAwEAAhEDEQA/ANUHFT0GEXTmAJ2dQpOBKT2WTA9OLiUBXFO6sMdCc2knlkICnXEp2Cwec6p1Yq1wowVlleWknC/Sw2QKOrW2U+Lq92VncRxGEqcPxL3A6p1GuTaUP/V5tVEKxDrKbdCaaBjJTDhuSouxTgFZwPE2j3inIdrr8LsVTxfDYEhFHY1jjZThocISsKVi3tvCZiSWiRZG+KYCDIQl7ZsVM4Vo7gtdz3d4lbrBYYQvPabSwy0rX8Bx5I7y6cctsbjof/TwpKS62uCFxlS6pLtSgCmPwwVkFRVn8kwq1qdjCw3HOHlxMrfXhAeNU7FSby/EUwwkbgrtJxKs8aw8P8VFhDCS9pawlsIK6WlGXuuuYmgHN0We9K7D8C7vIocZlsg9OmWElV34wlyr19k3LQzW4lBulS4sENp4V1QwAi2D7Lu1JRccYmZWn/8AyoSVarwF8mEktYn7Vu2OtKdSQClxCBCI0MRIWiRFTUwhjMTzVujjhCQglTqgaqtjMQNkNxGLk2T6IJSUeXIzgaYhB6FBznW0Wmw2HytWf1XxUxJssjxOM8aFa3iOOpMs5wE2vYeqynFuGvrH2lIiWmHNNj/nT4hK3ka4RPgBRYQnNJTKmHqAw4EQddjeJnyV6iwABECatUshmKwjn+6URrMkKBuIyCSlvVV3A4YKtTvmVhnaB9P3gm1+PA2hDcTg61cxTpuPw+a1nPbK8dL1btRmtCoVeLiZVzC9hcUfeyNsN58QQmYz/T/FR3Sx1+cWt/lK+hy5nYbHteNUWwOKyjVAaHYfGsMw0wRo7bc+S0DOy9fLDiwGOfwUcY3irnPbVcEq5hqrWMJbcIFwXBVaFnPa4enzWiZVDtVtMpWdljuGqkhSsB3U1KkApMqvSVclA+N4dz9FonMUbqQS0HneL7POqOE6IZxrghpNzDZenupgXWe4rxOi0y6HbgeALj8goyymK8ZawGFwj36McfIqwKcW35LQYjjNaclKic+UZgIDaeYDK1ztA6L5dbhQUcQ2s/IQCbd8XAO4kWOm1vmsbbWoQcCHDRNw/BWh0kI66jlsdkwhRMqViXBcOYIhEcsWhUqBIVp1dV7Fpw0ui6ozikk9wMqaRBR/h9HupUsOCborhqQ2W+2Wgivg3KNlIrRVKaY3CBADMHgZuUawnD+eic2llhE6LhlU1UQmk1gTMVjMtNzjoE40y4qh2gaG0u84sE+8NjtPRY5bk20mrwwfEsR7UucXtzDZxLSW8jeOoPXyQuniiG5W1DRqbZ5ayoAZa5pNmuB/6nURsP45Th0kC5MPZOR3kSYPmqvC8eG/7dTIaZP7w6x5gt38QtccPx2WWWrps8D2pM+zrNDHGGuadNZa5p5SI9EQwtcVQ72Zu0w4bghZV1BrqUMre1ogHugNe+kejXEOy/8AEofwjjT6NVpBkAw7UZmkAEHyAPj4pY4b3oZXrbdClW0hSu4NWqiB6qDE9oixzPZkVA8SARcdDC0eD4lUeA0taDaQ36k79FFqvUO4V2TpsfLz7Rw0aB3R/wAjotXSwZF3EDoLDzT6bG0m5nEfJCOIcWk7+AB+kov9LGb6Fa1ZoFnx4QqZx1P+6ekLIYviWYzmgzMaW9DKWH4yDY+Pj9UtWr1pqK+P3bIiPsQoGcSJtH54oWyvmgAgyNr9UqZJg3vG/lJ6SUtGO0q5eNLdOqm9hf379Y1Wdq8Qc0QLAb89fQWUJ4o6OU7esi3h8E5KVjY0cS9lj3h8Vfo4oFefO4lVbeQY1k2HjyPy+ZThPGxVBv3hqB876j5LSZ2M8sG11VfEYhjPecAhlPGviAQDFp0PgvP6+OrNxQbWJAzTJ035/llV8n6Tj4/3Wl7TcfE+xpm5mT0Gvl9liMNRr4io6oGltNxID3ODIYD7rC4XeYaJAIgId2mxs1XOY8lru6XC0jcN8whnEePOfTFJoDWjlOY6+843OvhrZL0yy5V7Y4zS5xziZJ9mKoc1pPdph2Sf3Evdeof7jrfQa2OGcQr1HMbmDWCAO8ASZsCd5O2nTnlmOcbbctvRa3szVe02axp0zQM0dIEu8CY5q88ZjijC3Ktzi2RluCYvFxO91TJurWMfmawzJi5MfSw8lUAXG1TipZQe2uulV6zoCqQtnuxCSHl64q0nbUU6ElEaGFhQ4GmQiYW8ZoKlOy7QYpXNUOUqgc4SVZoU1FTpq0xsJa2D84aqHGO9TJGwOtx5jcJuKJlPpvlsJZY+00eN1dvJOK4MPD3UQGN1ewGQCNwBb0WXr0CLg+nyXova7h4pPzOloN2VWj1Y/msLVuSe7I5aHW/TRLxWzitPJJeYFhxGiJcLwzqjgGiXEwAJKquZK9e7AcFDaDKr6Qa8gwCB6kfda+TP1jLDHk3gnZsUmtJu8+JE75VsMFgmsH+D+eae4Bpue9y3gbAKL9QcpdAue74DQ/Ncn3db98QO7QVcxychrO+/hZAsRhIYTmOtzcf+xzQpOO4wAGREg5joA25J8xp0C84xHHnycsDqLOi4gECwjZVjhc1XOYRpcRw+QXB1hpEnTe+yo4DClz7Xidd4mUO4dxp7TDS6DFnRYxEh5v8AyvQ+yeCp1GZ2+/cuaZDbnRs6j7qst4dpmUy5DcmS3+DofrCkbjR8D8zEeZ0WqfwFpMvIDjyHVdbwCmBe9o05bqef0PaM0ypad7ASfUnnt6q9QwjSC7ui5DTzJ+PibaWRIcFa0ktJyxJAu6RBtz0headsuL53kAlrAMobMEDrHX5JSXK6h3KSbHcUaVQloqGWm9s0396A4ABDMPVLKmZjjnYZIgtkC0XJbEbArFPxbxLSSB/TJA8wNfPmr2HxoNO8hzdCDqNszSL+Igro/wAtMv8AXb2GjiW1WBwNnARFiD0INlBxDAMrDLVBcIs4WePOPnKwPAuOezIBjKdRbKJ5fK63eD4g2Ny06TNvDW3h6Bc+eNxrSWVkeO9jopvfRIqZQbaOHiNyB4Lzsi692qi4uZm2od1HXw3Xk/aXhhp13w0wSXAgGLm/otfB5PlZeXH6g4FgPaP7xhouTy5ePgvUeC4P2bQKbQGx35HedzDyb+novKMLVPugmSRYDlsFueGe1az/AHDcgCP6QNAp8+OVva/HZMRqviMzibdI0XWQqtMqdqw0tI4JjaAKjfWT6RJTiaZ+lCSnISVJaZjArLKagZqrGddEZuOC5ATXOTZlGz0c03Vh+iiw7bqyW3RBVKpSlOo01c9kutYmkP4jgW1WOpvALXCCF4z2v4B+lqFrHOLNRmAt4OGvovdXi6D9qcIx1B2dgfbew87hLrk++Hi3ZfhT8RWa1oMAguOwE3vzXvAYKNIBo90QBN+glYv/AEz4d7NlSqQJce7BtAsLRa/5otLxLEZmAbXNjrG9tvusvLnutMMUYqEZnOc1z4NzGVrbTEWiwtcmL9KfEuIhjCXf+JPe5yeg5dCNAh+PrhrBlgXgz/aYAA3M7RZDsWWuBc8uMgiI714tE3JOseF7rOTbbWgxrjiXOJdsSQdJsWs9A0R/KC0OD0y/K5oPmW5rgTA33sR6Iq3CtY7ugsuT33MaY3z7tFtJM6K5gm0tr2JBvPkT4a9CuiZa6Z3HfaTsx2XFcZntawNMNDToJOYblxtF7albLGcZpYUDD0GZ3tEECYB5EjUqGpiRg8C6tqcmZo2l1mk9SSPKV49i+0VcgtDi1puYAzO3lz/eMzOqeEuVtrPOycR6ie0WLJH+20TMabdSY81UrdqsW0kkCAdIaR6+R9F5cMfUdcvdPifzZQ08fUaZa9wPQn82WswjL2e59m+09LEnI4ezrawPdcBqW9enzUXbXgNOoDUa1oflLgY1cLg23kD1PO3kXD+KVGva/wDcDLT1Xs/CuJMxFJtM2JYHN53aDHxWXkx1zGnjy328oxbyW5ng1HEy5zu+6NGgF2m19bBUXsYKbiRDie7ubG+aeh/+qPYp3s6r2ObdjnN9HAsHmIQrE8PeXuzWBJN7HyEK5RZ+lDBVJI6G03/6/wCFpMJi2tiGgE+IFvkY8kIwzgz9xF+kRv8AnRTOxALg7eNdARtmb9T8Esps8eGuwfECe64yNtZ6W1HrCZxmnnpy3vEyREZuRvF7HxQPC1riDBHX0iEbbjQGkOtedLX3Hj/lc1x1Wm1bs12aczNUfSIOxfII8LIx+n2RXgnFC6n7M0xa0tNz1LQPqqmMqZX6QFtZ7cs5fXhSbRMq17MAKOtW0sm1ahWeWMi5dueykqwxsJlISpIUBGUkiV1BNE10lWXvgKPDAKWsAtUqFbGAKXC1w5UMXh5Nlb4bhoQYhoFyhVM3T6rVEQqISpGU+rCp4ZyWKxFlUvCbDMTiw0E8ljuN8aFaoKAu0nvCYOUa3kDZEOK4gZTmMW1F/lcLzrh+Ee7FzTrQ5pzZrusDeenUlRedrk09YoMYygA0ZREAC9hYX+HkqmIqWJjTS1pm1t9HH0Qh3GWucKROaHaNIJMQSSATGu+5UPGOIOOdrRYXtuRaAJmB9Fy91vJpSx+KaCbku3AzW6SPkDfdDxxAnM5ziALTcXOzY38BJm9lU9uJJvmiCJsJ1kRc9fDqV3BZpEw2LyYPQGDoSbCbAT4jomOom1LWw4ABIa1okxcuMWuIudP6lfwVMPq0mOuXFrWjbvWLnHoJgARc+CqU8LmJc03t3jp0nk22g620nRdm8G32jH3OVrnAmbuIy6bRIslaF7/URjf0bmdaYA0gB7Y8F51huwWIqB7g5mVonM4u93Lmkc/6bTcHRer8fwra9FzXaEdNdi3rO6xeD4pVoj2VWcoMB7YIdsA8Ea/AytfFn3GOeP159i8F7LuhweTBkaaaD1V3s32e/V1MgeGmCRNhIixMGBdaE8Hpd2Wl0lwY9neDx+0RqCLSeiIcMxrMIzLRbneSJnLlOoAc6CNyLdNdVttnpneO9nBhiMpcTmyDkXQC6PI/FbHsnSGWm65cLQDsAIj85LO1qVR7/a1HA1CTYDusBPeAIvOhkiETwFcNf3TYECRpIO4+yyyy3xFSa5M7YU8uKzgDLWaAZn3m7+nyWex9bMcouf2zEnKNCDq6/j6rT9rqudreYMg9R+fFZHEuaYPqOXI+Pglh0q01p7txl8NjzIIvr0hVWG9tvL+F19W9ieYIMx0vqNdU9rZFjDtBrB5wfp/laJTvxbhppEbCPHbwV/B40OgHQgxbl18vNA/bGb+e/ir2DsXRHOLEEcx/SVGWPB41ruxHFyx76cyyJE8jcO8LhFcUS55OyxfDMVGIpOZAmxDstjcH3oH5ZeqUeHBwzER4QUToUKpUAQq3EqNrI1VwgFgmuwNpKm47PcZVtZ7UmYvmiWMpC4CAVMMWuus8sDmQl7dJUg7qko0p6BTTXynNFlKxq1iEIoqWm2FyrZNw7pTmg7iSU5gtdMquuu5psgLLKoAVDF12gFxMKU0oFysj2mxQaD3z4beQRdnIEdpeLNJOUkDqD3kB4Liy15d7XIP6GteZ6mLeZPkVWxWKzkj0Jn5DdEOydBjqkuY48gYgnqdvJPKaxpy7yg/wB2tXKCMxyC4GYSS906neYMDWLBCa9Z2Z/eiTJMXIAIaANhcmOm5ujuMqVHRTDmsEFz2saGhrAJiTfvH+OYGvlbncZFiQDmLuQJEgcjPSORWGPe2tDRiHWpshouXm+8mOZNxPMwFcbUD23kBpJABAkiBfkBYTO51sgja5bt33E3P7RNrc9SlhKrhla2JmTMWAILd9fHS/Mro9WPsO4LG5C5hgSYdzJIi3JtwPwrX8NxrWvDWa5IABmBmAM+Z1WExmLY5zslgLkxBc7z21MdLq32f4hlrDQjLkiZ/b3RPQjXzWeeG5tcy+PU2km5HdgknWPgsB2i7r3Bp7oJ95wiXSbmdYBB8gtL2q4t7LDtgySNgbQJnpt69F47VrvrOJeSZOiPF493aM89CdXi7gC0VJaZmDOguTHTbqm4fFNyxmB6CBY273w/AoKOFwmlR1Zh5hrHj0JBUj+H4OO7i3g/3UXfMOXVqMeWgweNpBgiZixmQQSSGztc+qvYXBAyQ6ZE76O0BOh5ed1jf01IA5Kjnn+rLlHgGm/qi3AuMFrsr9CdxIOk+set1lfHrpftvtd7ROytAkyI1n6LN1a15H5+Si/aGqagzt90kQP6QNJWdrPFo2+J38NvRPxzgZVKHb9dvvsu1a17669Cfqq2b7+KVLXnFxPyK00jax7bMZiLQdfir+DfDQ79wd108tEKpjceCs0q17Wi30U5RUqzTqZMQHNIEOBGYTHoV7lw4F1JrpBJAMt08pXhDauZwGh00seS9W/wBOMbULTTeAcvRs+ZBn1CQF8e17b6odVx7y2IK2VWgCLqi/ANnRTo9shSw7veKz/GsVDoGq3vF6Aa1eaY6faGeam8QXlMx5hJOa4QuLHbV6fQbIlTtaqteuGQE5mKELWSIdxEruEFpUdXEghOok5USci1HWMlT0W7qNgTcfVLWWQEmJqWPReX9p8VmqHvC0m038PutlWxjjScSL32n0XntemXVHAC5M+Hj9+oTxu6cnAdiqkCAO8d+Q3gEctz/Jfs7VIds1oElzveANjYH3naDo23JBOLUHSLjyMztJjZEeBk5SWtnKWxYd5xIaDffx5jVVnPxGN/Jo+J1hSeKbbGo7M4/uMdOmWOmTqhdTE9w5yHF7iJPeIa0wZI0s2/KQieOaw1DUJHtHQxuvda0EPPjlzW+ypYp49m7uNgWB3EsbUcR1l3wXNG1ZvHPaTnYDlk3fAzHoJJygbnmq4qEmTInvGRruZHInZNxAJ0bEm08vBRB0Wzfz9NAuqThz28rmHpTIiTFxO/7Wz43Ph6EcBVax+Y3a3VgOo0Oml9/ggLatrT5WmdZUtBxk7Wv9B01RcRK9DxGLp41oa5wbMmAQbbDyhRYLs/SpQS3NeDzj90xJ3Fhp1N1hf1AYdSfA7Daft6q67tBULQ0ugW0t5W2H5pfP/Ozo/aXsc4zhsM5wEAER7v7i4t+UOH/ZAqeGoZoOhmDy77xJ9GnwlUq+LJNiSbXKhovg3PnyBBE/FXjLpN1sT/QB0AbeR1gzsbjT4hWhw4UgHudNjblrcT+CyojiBaBeSDHqBf1k/wAqDF49z4m8aeEX+nojWVHETY/GyCzUEgjbe3NCnEDYz1IPwhJpUa0k0i3bpdOvqkwXXGhLW6oko6LjX9481JQpzqo3XedjmskazwqrDgTYAzfS3xHkvT/9N6lN73uZ7wNxmdmg6dHBeYVGlgsI+nNGexdapTxLHMidxMBwOrSRp52mErN8nvXD3tz1A8ldwuID2hwkSNDqOhT3GFBhPFcK97SAsFxfgtVpnLK9O/UtVHiMOFhKVhyvK/0z+SSPYnBvzHu7pKfSH71qcX33Ku+RaUw4jcKMvJUrS03EkBG6LbIJh9VocNcJ4lkpYh0KriqrnNgBXccFVr1QxkxJ9EqADjtXJTguEkHWbWN7XJ281j8VVbTtJJN4Np8ekIzxvEy+bcwABYb/AC+GyzThmcXESZMSdXXN+gsSnhFXhWrvBPetJkbSADJPTkD9E7BYwtBAbuGtbc96feI5x845zGwFxJkZjaesxA3JP8prxkqSIDmwACZAdrJ/tH51018Z/wBaLiDpqtlwAYHgAHU+6Z6HQdPVR4eoPZPLt6tQgTOjAxuv56JgptLKZAJMui2YxLnOqZTrPeidyAn4xgbTp0mEZy4vdoIIBjMT4SSeS5/42/oNjsRlMNGvzNgBO0f+3gg1VkG+qKcToBuJLSJaItf/AJQAL2kDyQ3E1JebWGnncrowY5o2uiE4VLKPddYb/hWjNITOxn81ULjCc53IJGl6/mqAYHp3tE4sXfZRqgIzUSzXSDZSyII6UwldC4SgOgpzNSFEU6ke8PFAX7BuXmBfqIVYNE5jzulUkht9CY8yPqk50iOevw+yJDruIq97ofO+hRXssxxxFMMdlfPdO07ePKOqDmnsfIq5wkPDwWgktINtbXtz3sn8L698wOJdlGZuV0DM3UAndp3afy6kxeIOWyrcFxArUWPFzEHodwr7MPOqyaBFEHUlXqLxCtPwIKo4mjlSBPY0nZJVXEpICuMLCTqMK22oE3EjkoXtVpi6N4MkBDMCy90SrmG2RBUWPePy6ynaLiFVrYawBu8nveMfZEnYx4zOIJFwAMo8yXELD9ouKPqPiIj90h8TpBE3hLuqnCs5xc+J+p0JPjeei5iKsjuiG+7PMTJHwBJ3KqGpfUWBDjocvLNzM+gVx8RmcIDW6WAFz85V6GwmoxzLzlIkjWQJ1g81ToVAO8Qb2EzG0u5lT1TnAOgLi1oGtoJnnqPVQVDlJI1A8YP3t6rVjWgw7znmMue39xy94kRo0ZRYa5fNPwtEuqOxD/dDc2gj3JteNXSPEcwg3DXkgl0wGu8e9LYbymTJ5Aq7ieJF1JtNuvczwZzFxzBoHQRHpeLYZY3fDXHLg/FEVHPqvtnc4gb5QSC640kADxPJZzEMh8EzoTv1haLiGID6jWsGrWnNtPeeQP8AyA/6nVZuqRzknX6K/GnyUskyRsE0KRzTGnL4WSZQJFrnotNs9I3CPzwUrR6nX5QmssbpVH77oJyo6yhdVJjp/K7mTFUKp6Y3TyoqL7/dSVSLJGjc5MKTik1MnW6hImQkSmhBJqLp11Bn7rua3goGpzEBYBtKLdmgfbCNehIPkRvv5IEEZ7OE+1Hr/CKcez9nq7Q2Ig+QkeA+SOGsFhqPEMoRXAcQzbrJo0ftVUxgkJra1kqdSSkA51N6SMGEkAHrM5JjHmYKuOqsVHHu5KFCVBghOfVgKrgKvdklVsbjQenW0JW8HJsD7ScWYxt3mmLiQBmceTZ+d151iMYHGROXUi5JkzB6nfoFrO0GIptkClJIu8/KXA5tZ5LF4uuSdgOQ5deSvxwZ3QjhW5hPWflJO/8A+grfErsaB+4SdBAjX0Q3C4zuBogc4uTJ/wAq1XfmnkAOpAt/HmU7ORLwrU25WOP9vQxoTHIkwNlDh8PmERqM3gDoXHkIA9VzEzOSdSAY0vE29B5JlasfcbebEi8xy5C2ngrRUOMqjNDNIi24TsBXyubNoeHRqZEBvzcm0R3w3kHT6R+eK5iaGWDe5t4iPUp8dJ57WaeOIcwxBBynkQJgW05KgKgBgA/XxnZdxdMh2U/fZTYGixzmBxgOkbAh0WAnYkt9SjUk2N23SSnjw0ACmJF++A6T5jqosbxN7zcAD+lrQ0XubBQ1qkPh37bSBcxpPNROfJ08zM/b4JTGd6FyvW3Xu3A+pUZKTtVxXEWkuriSYdlJJwXEB1dDk2UpQHcyUriSCSi1yuZrrgMpFqDdCMcBaTUaROu3LceiEgLSdlWkPkBrhu11pHNp/qCVON9huFSAdVboYQsKtcPriBtbTdWHVhKxaLmDbIVkUwquFqBT1alkBUrE5ikqVXGXKSAcygALpANNkklmtUxUzAMN38EJr4qCZtaWi9gN7aldSU1cYritRznOd3ojcyfnzQOq2JLr/fqkkt/Gz8iHNlCJ+3s1onUW2gAEk+f1SSV1GKjXxEVJGxHm7byBT2nIDGzRflmF/mkkmnaPCiHA21B8uqs+3DnS4WaHGPHM4RykkCeQSSSpxzjhYHw2ZgEk3kkSfiY8lQxTgSYEXKSSMeoWV5p0NLC4k5gY8ZFifQ/BVikkqia6SuBdSTBELsWSSSBpSXUkyJKEkkG5CSSSCKVKUkkA9iIcJrltRsGL2SSSU9AZxNwAtB/ORVmhxKXBdSWdi2kw1UASliscAEklJgz6kmUkkk9Ft//Z"

first_row_html = ""
for (var i = 0; i < 15; ++i) {
    var card_id = "quality_label_card_" + i
    var select_id = "quality_label_list_" + i
    var gallery_father_id = "quality_label_gallery_" + i
    var gallery_id = "nanogallery_" + i

    first_row_html = first_row_html + ' <div class="card card-primary border border-primary" id="'
        + card_id
        +'"style="width: 115px;margin: 3px;"><div class="card-header" style="height: 50px;padding-top: 5px;padding-left: 10px;padding-right: 10px"><select class="form-control" id="'

        + select_id + '"></select></div><div id="'
        + gallery_father_id + '"><div id="'
        + gallery_id + '"><div id="nanogallery0_text">被标注人的图片</div></div></div></div>'
}

$("#first_label_row").html(first_row_html)
for (var i = 0; i < 15; ++i) {
    var card_id = "quality_label_card_" + i
    var select_id = "quality_label_list_" + i
    var gallery_father_id = "quality_label_gallery_" + i
    var gallery_id = "nanogallery_" + i
    add_image("#"+gallery_father_id, [kuma_url], gallery_id, "0000", "time", "1", false)
}

second_row_html = ""
for (var i = 0; i < 15; ++i) {
    var card_id = "quality_label_card_" + (i + 15)
    var select_id = "quality_label_list_" + (i + 15)
    var gallery_father_id = "quality_label_gallery_" + (i + 15)
    var gallery_id = "nanogallery_" + (i + 15)

    second_row_html = second_row_html + '<div class="card card-primary border border-primary" id="'
        + card_id
        +'" style="width: 115px;margin: 3px">'

        + '<div id="'
        + gallery_father_id + '"><div id="'
        + gallery_id + '"><div id="nanogallery0_text">被标注人的图片</div></div></div>'
        + '<div class="card-header" style="height: 50px;padding-top: 5px;padding-left: 10px;padding-right: 10px"><select class="form-control"  id="'

        + select_id + '"></select></div>'

         +'</div>'
}

$("#second_label_row").html(second_row_html)
for (var i = 0; i < 15; ++i) {
    var card_id = "quality_label_card_" + (i + 15)
    var select_id = "quality_label_list_" + (i + 15)
    var gallery_father_id = "quality_label_gallery_" + (i + 15)
    var gallery_id = "nanogallery_" + (i + 15)
    add_image("#"+gallery_father_id, [kuma_url], gallery_id, "0000", "time", "1", true)
}

g_label_item_list = [
    "is_real_man",
    "has_vehicle",
    "has_print",
    "is_multi_person",
    "crop_level",
    "crop_bad_border_level",
    "occlusion_level",
    "blur_level",
    "brightness_level",
    "pose_level",
    "contrast_level",
    "is_after_glass"
]

g_label_item_in_Chinese_list = [
    "1.1:是否真人",
    "1.2:是否骑车",
    "1.3:是否有打印文字",
    "1.4:是否多人",
    "2.1:截断缺失程度",
    "2.2:边界不准程度",
    "2.3:遮挡程度",
    "3.1:模糊度",
    "3.2:亮度",
    "3.3:姿态",
    "3.4:装扮辨识度",
    "3.5:是否在镜子或玻璃后"
]

g_label_item_all_level_in_Chinese_list = [
    ["0:是真人", "1:非真人"],
    ["0:无非机动车", "1:骑非机动车"],
    ["0:无打印文字", "1:含打印文字"],
    ["0:非多人", "1:多人"],
    ["0:0-5%几乎没有截断", "1:5-20%少量截断", "2:20-45%较多截断","3:45%+严重截断"],
    ["0:0-5%几乎没有多余", "1:5-20%少量多余", "2:20%+严重多余"],
    ["0:0-5%几乎没有遮挡", "1:5-20%少量遮挡", "2:20-45%较多遮挡","3:45%+严重遮挡"],
    ["0:清晰", "1:有些模糊", "2:严重模糊"],
    ["0:亮度适中", "1:亮度较差", "2:亮度极差"],
    ["0:正常姿态", "1:运动幅度较大", "2:复杂姿态"],
    ["0:正常装束", "1:常见装束", "2:难以分辨装束"],
    ["0:正常", "1:在镜子或玻璃后"]
]

$("#label_item_list").empty()
$.each(g_label_item_in_Chinese_list, function (i, label_item_in_Chinese) {
    $("#label_item_list").append("<option value=" + i + ">" + label_item_in_Chinese + "</option>");
});

function label_item_change_function(){
    console.log("label_item_list changed");
    //change legend
    var item_index = parseInt($("#label_item_list").val())

    var item_legend_nums = g_label_item_all_level_in_Chinese_list[item_index].length

    switch (item_legend_nums) {
        case 2:
            $("#quanlity_legend_1").attr('class', 'btn btn-block btn-danger')
            $("#quanlity_legend_1").show()
            $("#quanlity_legend_2").hide()
            $("#quanlity_legend_3").hide()
            break
        case 3:
            $("#quanlity_legend_1").attr('class', 'btn btn-block btn-warning')
            $("#quanlity_legend_1").show()
            $("#quanlity_legend_2").attr('class', 'btn btn-block btn-danger')
            $("#quanlity_legend_2").show()
            $("#quanlity_legend_3").hide()
            break
        case 4:
            $("#quanlity_legend_1").attr('class', 'btn btn-block btn-info')
            $("#quanlity_legend_1").show()
            $("#quanlity_legend_2").attr('class', 'btn btn-block btn-warning')
            $("#quanlity_legend_2").show()
            $("#quanlity_legend_3").attr('class', 'btn btn-block btn-danger')
            $("#quanlity_legend_3").show()
            break
    }

    //change all select items
    for (var i = 0; i < 30; i++) {
        var card_id = "quality_label_card_" + i
        var select_id = "quality_label_list_" + i
        var gallery_father_id = "quality_label_gallery_" + i
        var gallery_id = "nanogallery_" + i

        $("#"+select_id).empty()
        $("#"+select_id).append("<option value=" + -1 + ">" + "-1:未标注"  + "</option>");
        if (i < g_last_label_result_dict_json_list.length){
            $.each(g_label_item_all_level_in_Chinese_list[item_index], function (j, label_legend_in_Chinese) {
                $("#"+select_id).append("<option value=" + j + ">" + label_legend_in_Chinese  + "</option>");
            });
        }
    }

    // if g_last_label_result_dict_json_list is not empty  change  value
    change_label_item_color_and_val(g_last_label_result_dict_json_list, item_index, item_legend_nums)
}


$("#label_item_list").change(label_item_change_function);

for (var i = 0; i < 30; i++) {
    var card_id = "quality_label_card_" + i
    var select_id = "quality_label_list_" + i
    var gallery_father_id = "quality_label_gallery_" + i
    var gallery_id = "nanogallery_" + i

    $("#"+select_id).change(
        function () {
            var select_id = this.id
            var card_id = select_id.replace("quality_label_list_", "quality_label_card_")
            var item_index = parseInt($("#label_item_list").val())

            var item_legend_nums = g_label_item_all_level_in_Chinese_list[item_index].length

            switch (parseInt($("#"+select_id).val())) {
                case -1:
                    $("#"+card_id).attr('class', 'card card-secondary border border-secondary')
                    break
                case 0:
                    $("#"+card_id).attr('class', 'card card-primary border border-primary')
                    break
                case 1:
                    switch (item_legend_nums) {
                        case 4:
                            $("#"+card_id).attr('class', 'card card-info border border-info')
                            break
                        case 3:
                            $("#"+card_id).attr('class', 'card card-warning border border-warning')
                            break
                        case 2:
                            $("#"+card_id).attr('class', 'card card-danger border border-danger')
                            break
                    }
                    break
                case 2:
                    switch (item_legend_nums) {
                        case 4:
                            $("#"+card_id).attr('class', 'card card-warning border border-warning')
                            break
                        case 3:
                            $("#"+card_id).attr('class', 'card card-danger border border-danger')
                            break
                    }
                    break
                case 3:
                    $("#"+card_id).attr('class', 'card card-danger border border-danger')
                    break
                default:
                    console.log("g_last_label_result_dict_json_list value is not valid")
                    return
            }

            var select_id_index = parseInt(select_id.slice(19))

            // actually not happen
            for (var i = 0; i <= select_id_index - g_last_label_result_dict_json_list.length; ++i){
                g_last_label_result_dict_json_list.push(
                    {
                        "is_real_man" : -1,
                        "has_vehicle" : -1,
                        "has_print" : -1,
                        "is_multi_person" : -1,
                        "crop_level" : -1,
                        "crop_bad_border_level" : -1,
                        "occlusion_level" : -1,
                        "blur_level" : -1,
                        "brightness_level" : -1,
                        "pose_level" : -1,
                        "contrast_level" : -1,
                        "is_after_glass" : -1
                    }
                )
            }
            g_last_label_result_dict_json_list[select_id_index][g_label_item_list[item_index]] = parseInt($("#"+select_id).val())
        }
    )
}



function change_label_item_color_and_val(g_last_label_result_dict_json_list, item_index, item_legend_nums){
    for (var i = 0; i < 30; i++) {

        var card_id = "quality_label_card_" + i
        var select_id = "quality_label_list_" + i
        var gallery_father_id = "quality_label_gallery_" + i
        var gallery_id = "nanogallery_" + i

        $("#"+card_id).attr('class', 'card card-secondary border border-secondary')
        if (i < g_last_label_result_dict_json_list.length) {
            if ($("#"+select_id).length != g_label_item_list[item_index].length + 1){
                $("#"+select_id).empty()
                $("#"+select_id).append("<option value=" + -1 + ">" + "-1:未标注"  + "</option>");

                $.each(g_label_item_all_level_in_Chinese_list[item_index], function (j, label_legend_in_Chinese) {
                    $("#"+select_id).append("<option value=" + j + ">" + label_legend_in_Chinese  + "</option>");
                })
            }
            $("#"+select_id).val(g_last_label_result_dict_json_list[i][g_label_item_list[item_index]])
            switch (g_last_label_result_dict_json_list[i][g_label_item_list[item_index]]) {
                case -1:
                    $("#"+card_id).attr('class', 'card card-secondary border border-secondary')
                    break
                case 0:
                    $("#"+card_id).attr('class', 'card card-primary border border-primary')
                    break
                case 1:
                    switch (item_legend_nums) {
                        case 4:
                            $("#"+card_id).attr('class', 'card card-info border border-info')
                            break
                        case 3:
                            $("#"+card_id).attr('class', 'card card-warning border border-warning')
                            break
                        case 2:
                            $("#"+card_id).attr('class', 'card card-danger border border-danger')
                            break
                    }
                    break
                case 2:
                    switch (item_legend_nums) {
                        case 4:
                            $("#"+card_id).attr('class', 'card card-warning border border-warning')
                            break
                        case 3:
                            $("#"+card_id).attr('class', 'card card-danger border border-danger')
                            break
                    }
                    break
                case 3:
                    $("#"+card_id).attr('class', 'card card-danger border border-danger')
                    break
                default:
                    console.log("g_last_label_result_dict_json_list value is not valid")
                    return
            }
        }
    }
}

function from_line_and_url_to_html(line, url_list) {
    var content = ""
    content += '<div class="row">'
    $.each(url_list, function (i, url) {
        content += '<div><img src="' + url + '"' + ' width="110px" height="190px"' + '></div>';
        // content += '<div><img src="' + url + '"></div>';
    });
    content += '</div>'
    content += '<label>' + line+ '</label>'
    return content;
};
function imageContent(id) {

    var content = "<div>";
    switch (id) {
        case "is_real_man_help":
            var line = "各种明显的雕塑、图片、人偶都属于非人。（1）"
            var line_url = [
                "/static/web/dist/img/quality_score_img/image001.gif",
                "/static/web/dist/img/quality_score_img/image002.gif",
                "/static/web/dist/img/quality_score_img/image003.gif",
                "/static/web/dist/img/quality_score_img/image004.gif",
                "/static/web/dist/img/quality_score_img/image005.gif",
            ]
            content += from_line_and_url_to_html(line, line_url)
            var line = "真人海报，照片、视频中的人算人体。（0）"
            var line_url = [
                "/static/web/dist/img/quality_score_img/image006.gif",
                "/static/web/dist/img/quality_score_img/image007.gif",
                "/static/web/dist/img/quality_score_img/image008.gif",
            ]
            content += from_line_and_url_to_html(line, line_url)
            break;
        case "has_vehicle_help":
            var line = "自行车、电动车都算，婴儿车也算。"
            var line_url = [
                "/static/web/dist/img/quality_score_img/image009.gif",
                "/static/web/dist/img/quality_score_img/image010.gif",
                "/static/web/dist/img/quality_score_img/image011.gif",
                "/static/web/dist/img/quality_score_img/image012.gif",
            ]
            content += from_line_and_url_to_html(line, line_url)
            break;
        case "has_print_help":
            var line = "除了左1是不含打印字，其他都是含有打印字的"
            var line_url = [
                "/static/web/dist/img/quality_score_img/image013.gif",
                "/static/web/dist/img/quality_score_img/image014.gif",
                "/static/web/dist/img/quality_score_img/image015.gif",
                "/static/web/dist/img/quality_score_img/image016.gif",
                "/static/web/dist/img/quality_score_img/image017.gif",
            ]
            content += from_line_and_url_to_html(line, line_url)
            break;
        case "is_multi_person_help":
            var line = "左边2个是画面中有两个完整的人体；中间2个是框位置不准，容纳了太多其他人的区域；"

            var line_url = [
                "/static/web/dist/img/quality_score_img/image018.gif",
                "/static/web/dist/img/quality_score_img/image019.gif",
                "/static/web/dist/img/quality_score_img/image020.gif",
                "/static/web/dist/img/quality_score_img/image021.gif",
                "/static/web/dist/img/quality_score_img/image022.gif",
                "/static/web/dist/img/quality_score_img/image023.gif",
            ]
            content += from_line_and_url_to_html(line, line_url)
            var line = "右边两个是框的后面的人，但是前面的人有大面积的遮挡（30%以上都算）。"
            content += from_line_and_url_to_html(line, [])
            break;
        case "crop_level_help":
            var line = "几乎没有截断"

            var line_url = [
                "/static/web/dist/img/quality_score_img/image024.gif",
                "/static/web/dist/img/quality_score_img/image025.gif",
                "/static/web/dist/img/quality_score_img/image026.gif",
                "/static/web/dist/img/quality_score_img/image027.gif",
                "/static/web/dist/img/quality_score_img/image028.gif",
                "/static/web/dist/img/quality_score_img/image029.gif",
                "/static/web/dist/img/quality_score_img/image030.gif",
            ]
            content += from_line_and_url_to_html(line, line_url)
            var line = "5%~20%（四肢头部有少量的截断、较为完整）"
            var line_url = [
                "/static/web/dist/img/quality_score_img/image031.gif",
                "/static/web/dist/img/quality_score_img/image032.gif",
                "/static/web/dist/img/quality_score_img/image033.gif",
                "/static/web/dist/img/quality_score_img/image034.gif",
                "/static/web/dist/img/quality_score_img/image035.gif",
                "/static/web/dist/img/quality_score_img/image036.gif",
                "/static/web/dist/img/quality_score_img/image037.gif",
                "/static/web/dist/img/quality_score_img/image038.gif",
            ]
            content += from_line_and_url_to_html(line, line_url)
            var line = "20~45%（四肢头部有较多的截断）"
            var line_url = [
                "/static/web/dist/img/quality_score_img/image039.gif",
                "/static/web/dist/img/quality_score_img/image040.gif",
                "/static/web/dist/img/quality_score_img/image041.gif",
                "/static/web/dist/img/quality_score_img/image042.gif",
                "/static/web/dist/img/quality_score_img/image043.gif",
                "/static/web/dist/img/quality_score_img/image044.gif",
            ]
            content += from_line_and_url_to_html(line, line_url)
            var line = "45%以上（有较大部分的截断）"
            var line_url = [
                "/static/web/dist/img/quality_score_img/image045.gif",
                "/static/web/dist/img/quality_score_img/image046.gif",
                "/static/web/dist/img/quality_score_img/image047.gif",
                "/static/web/dist/img/quality_score_img/image048.gif",
                "/static/web/dist/img/quality_score_img/image049.gif",
                "/static/web/dist/img/quality_score_img/image050.gif",
                "/static/web/dist/img/quality_score_img/image051.gif",
            ]
            content += from_line_and_url_to_html(line, line_url)
            break;
        case "crop_bad_border_level_help":
            var line = "0~5%（几乎没有包括多余的，最左提的袋子属于人）"

            var line_url = [
                "/static/web/dist/img/quality_score_img/image052.gif",
                "/static/web/dist/img/quality_score_img/image053.gif",
                "/static/web/dist/img/quality_score_img/image054.gif",
                "/static/web/dist/img/quality_score_img/image0545.gif",
                "/static/web/dist/img/quality_score_img/image055.gif",
                "/static/web/dist/img/quality_score_img/image056.gif",
            ]
            content += from_line_and_url_to_html(line, line_url)
            var line = "5%~20%（存在明显能感知到的多余区域、但区域并不大）"
            var line_url = [
                "/static/web/dist/img/quality_score_img/image057.gif",
                "/static/web/dist/img/quality_score_img/image058.gif",
                "/static/web/dist/img/quality_score_img/image059.gif",
                "/static/web/dist/img/quality_score_img/image060.gif",
                "/static/web/dist/img/quality_score_img/image061.gif",
            ]
            content += from_line_and_url_to_html(line, line_url)
            var line = "20%以上（非人区域过多）"
            var line_url = [
                "/static/web/dist/img/quality_score_img/image062.gif",
                "/static/web/dist/img/quality_score_img/image063.gif",
                "/static/web/dist/img/quality_score_img/image064.gif",
                "/static/web/dist/img/quality_score_img/image065.gif",
                "/static/web/dist/img/quality_score_img/image066.gif",
            ]
            content += from_line_and_url_to_html(line, line_url)

            break;
        case "occlusion_level_help":
            var line = "左边1、2、3为0~5%(几乎没有遮挡)，右边4、5、6为5%~20%（四肢头部有少量的遮挡、较为完整）"

            var line_url = [
                "/static/web/dist/img/quality_score_img/image077.gif",
                "/static/web/dist/img/quality_score_img/image078.gif",
                "/static/web/dist/img/quality_score_img/image079.gif",
                "/static/web/dist/img/quality_score_img/image080.gif",
                "/static/web/dist/img/quality_score_img/image081.gif",
                "/static/web/dist/img/quality_score_img/image082.gif",
            ]
            content += from_line_and_url_to_html(line, line_url)
            var line = "左边1、2、3、4为20~45%（四肢头部有较多的遮挡），右边5、6、7为45%以上（有较大部分的遮挡）"

            var line_url = [
                "/static/web/dist/img/quality_score_img/image083.gif",
                "/static/web/dist/img/quality_score_img/image084.gif",
                "/static/web/dist/img/quality_score_img/image085.gif",
                "/static/web/dist/img/quality_score_img/image086.gif",
                "/static/web/dist/img/quality_score_img/image087.gif",
                "/static/web/dist/img/quality_score_img/image088.gif",
                "/static/web/dist/img/quality_score_img/image089.gif",
            ]
            content += from_line_and_url_to_html(line, line_url)
            break
        case "blur_level_help":
            var line = "从左到右逐渐模糊，左边1、2、3为0（清晰），4、5为1（有一定的模糊）"

            var line_url = [
                "/static/web/dist/img/quality_score_img/image090.gif",
                "/static/web/dist/img/quality_score_img/image091.gif",
                "/static/web/dist/img/quality_score_img/image092.gif",
                "/static/web/dist/img/quality_score_img/image093.gif",
                "/static/web/dist/img/quality_score_img/image094.gif",
            ]
            content += from_line_and_url_to_html(line, line_url)
            var line = "从左到右逐渐模糊，都属于2。其中最右边是因为图片解码产生的问题。"

            var line_url = [
                "/static/web/dist/img/quality_score_img/image095.gif",
                "/static/web/dist/img/quality_score_img/image096.gif",
                "/static/web/dist/img/quality_score_img/image097.gif",
                "/static/web/dist/img/quality_score_img/image098.gif",
                "/static/web/dist/img/quality_score_img/image099.gif",
            ]
            content += from_line_and_url_to_html(line, line_url)
            break
        case "brightness_level_help":
            var line = "亮度为0（亮度适中）的示例，亮度和模糊度的标注互不影响。"

            var line_url = [
                "/static/web/dist/img/quality_score_img/image100.gif",
                "/static/web/dist/img/quality_score_img/image101.gif",
                "/static/web/dist/img/quality_score_img/image102.gif",
                "/static/web/dist/img/quality_score_img/image103.gif",
                "/static/web/dist/img/quality_score_img/image104.gif",
            ]
            content += from_line_and_url_to_html(line, line_url)
            var line = "亮度较差（1）的例子，包含身上明显的亮暗差，偏色灯光，。"

            var line_url = [
                "/static/web/dist/img/quality_score_img/image105.gif",
                "/static/web/dist/img/quality_score_img/image106.gif",
                "/static/web/dist/img/quality_score_img/image107.gif",
                "/static/web/dist/img/quality_score_img/image108.gif",
                "/static/web/dist/img/quality_score_img/image109.gif",
            ]
            content += from_line_and_url_to_html(line, line_url)
            var line = "亮度极差（2）的例子"

            var line_url = [
                "/static/web/dist/img/quality_score_img/image110.gif",
                "/static/web/dist/img/quality_score_img/image111.gif",
                "/static/web/dist/img/quality_score_img/image112.gif",
                "/static/web/dist/img/quality_score_img/image113.gif",
                "/static/web/dist/img/quality_score_img/image114.gif",
            ]
            content += from_line_and_url_to_html(line, line_url)
            break
        case "pose_level_help":
            var line = "1、2正常行走姿态（0）；3介于合格不合格之间的一定角度弯腰（1）；"

            var line_url = [
                "/static/web/dist/img/quality_score_img/image115.gif",
                "/static/web/dist/img/quality_score_img/image116.gif",
                "/static/web/dist/img/quality_score_img/image117.gif",
                "/static/web/dist/img/quality_score_img/image118.gif",
                "/static/web/dist/img/quality_score_img/image119.gif",
                "/static/web/dist/img/quality_score_img/image120.gif",
                "/static/web/dist/img/quality_score_img/image121.gif",
            ]
            content += from_line_and_url_to_html(line, line_url)
            var line = "4、5、6、7大幅度的蹲下、弯腰、坐姿以及复杂动作（2）"
            content += from_line_and_url_to_html(line, [])
            break
        case "contrast_level_help":
            var line = "辨识度正常的装扮（0）"

            var line_url = [
                "/static/web/dist/img/quality_score_img/image122.gif",
                "/static/web/dist/img/quality_score_img/image123.gif",
                "/static/web/dist/img/quality_score_img/image124.gif",
                "/static/web/dist/img/quality_score_img/image125.gif",
                "/static/web/dist/img/quality_score_img/image126.gif",
            ]
            content += from_line_and_url_to_html(line, line_url)
            var line = "装扮有大量的纯色，装扮较为常见。但还有一些可供分辨的小装饰等等。"

            var line_url = [
                "/static/web/dist/img/quality_score_img/image127.gif",
                "/static/web/dist/img/quality_score_img/image128.gif",
                "/static/web/dist/img/quality_score_img/image129.gif",
                "/static/web/dist/img/quality_score_img/image130.gif",
                "/static/web/dist/img/quality_score_img/image131.gif",
                "/static/web/dist/img/quality_score_img/image132.gif",
            ]
            content += from_line_and_url_to_html(line, line_url)
            var line = "严重影响再识别的图片（2）"

            var line_url = [
                "/static/web/dist/img/quality_score_img/image133.gif",
                "/static/web/dist/img/quality_score_img/image134.gif",
                "/static/web/dist/img/quality_score_img/image135.gif",
                "/static/web/dist/img/quality_score_img/image136.gif",
                "/static/web/dist/img/quality_score_img/image137.gif",
            ]
            content += from_line_and_url_to_html(line, line_url)
            break
        case "is_after_glass_help":
            var line = "1为在透明物体后的人，2、3是玻璃镜面中的人。"

            var line_url = [
                "/static/web/dist/img/quality_score_img/image138.gif",
                "/static/web/dist/img/quality_score_img/image139.gif",
                "/static/web/dist/img/quality_score_img/image140.gif",
            ]
            content += from_line_and_url_to_html(line, line_url)
            break
        // case "label_item_help":
        //     var line = "手提包定义为人的一部人，但是类似1、2、3无论是框起来或者没框都是合理的。"
        //     var line_url = [
        //         "/static/web/dist/img/quality_score_img/image067.gif",
        //         "/static/web/dist/img/quality_score_img/image068.gif",
        //         "/static/web/dist/img/quality_score_img/image069.gif",
        //         "/static/web/dist/img/quality_score_img/image070.gif",
        //         "/static/web/dist/img/quality_score_img/image071.gif",
        //     ]
        //     content += from_line_and_url_to_html(line, line_url)
        //     var line =  "行李箱等需要拖的或者是雨伞都不视为人的组成部分，所以4、5的框都是比较合理的。"
        //     content += from_line_and_url_to_html(line, [])
        //     var line = "左边1、2两张对应就是行李箱和雨伞干扰了人边界的定义，但是相对程度不严重。3、4、5则属于引入了过多非人区域。"
        //     var line_url = [
        //         "/static/web/dist/img/quality_score_img/image072.gif",
        //         "/static/web/dist/img/quality_score_img/image073.gif",
        //         "/static/web/dist/img/quality_score_img/image074.gif",
        //         "/static/web/dist/img/quality_score_img/image075.gif",
        //         "/static/web/dist/img/quality_score_img/image076.gif",
        //     ]
        //     content += from_line_and_url_to_html(line, line_url)
        //     break
        case "card-footer_help":
            content += '<H5>' + '画面显示未通过第一步：表示步骤1里面的4个选择没有完成或有差的选项，对应图片后续的9个标注内容就不需要再标注。'+ '</H5>'
            content += '<div class="row"></div>'
            content += '<H5>' + '切换标注项目不会自动上传，必须点击“确认无误，下一批”按钮来上传结果'+ '</H5>'

            content += '<div class="row"></div>'
            var line = "手提包定义为人的一部人，但是类似1、2、3无论是框起来或者没框都是合理的。"
            var line_url = [
                "/static/web/dist/img/quality_score_img/image067.gif",
                "/static/web/dist/img/quality_score_img/image068.gif",
                "/static/web/dist/img/quality_score_img/image069.gif",
                "/static/web/dist/img/quality_score_img/image070.gif",
                "/static/web/dist/img/quality_score_img/image071.gif",
            ]
            content += from_line_and_url_to_html(line, line_url)
            var line =  "行李箱等需要拖的或者是雨伞都不视为人的组成部分，所以4、5的框都是比较合理的。"
            content += from_line_and_url_to_html(line, [])
            var line = "左边1、2两张对应就是行李箱和雨伞干扰了人边界的定义，但是相对程度不严重。3、4、5则属于引入了过多非人区域。"
            var line_url = [
                "/static/web/dist/img/quality_score_img/image072.gif",
                "/static/web/dist/img/quality_score_img/image073.gif",
                "/static/web/dist/img/quality_score_img/image074.gif",
                "/static/web/dist/img/quality_score_img/image075.gif",
                "/static/web/dist/img/quality_score_img/image076.gif",
            ]
            content += from_line_and_url_to_html(line, line_url)
            break
    }
    content += "</div>";
    var data = $(content);

    return data;
};

// init
g_database_list_json = []
g_database_batch_dict_json = {}
$(function () {

    $("[data-toggle='popover']").popover({
        html : true,
        delay:{show:500, hide:1000},
        container: 'body',
        content: function() {
            if (this.id == "label_item_help"){
                return imageContent(g_label_item_list[parseInt($("#label_item_list").val())] + "_help");
            }else{
                return imageContent("card-footer_help");
            }

        }
    });

    // using ajax to get database and camera list
    var dataurl = '/quality_multi_get_database_batch_list/';
    $.ajax({
        url: dataurl,
        type: "GET",
        success: function (data) {
            var json_data = JSON.parse(data)

            $.each(json_data['database_list'], function (i, database_name) {
                g_database_list_json.push(database_name);
                g_database_batch_dict_json[database_name] = json_data['database_batch_list'][i]
            });

            $.each(g_database_list_json, function (i, database_name) {
                $("#database_list").append("<option value=" + i + ">数据源：" + database_name + "</option>");
                if (i == 0) {
                    $("#database_list").val(i);
                }
            });
            if (g_database_list_json.length > 0) {
                $.each(g_database_batch_dict_json[g_database_list_json[0]], function (i, batch_name) {
                    $("#batch_list").append("<option value=" + i + ">" + batch_name + "</option>");
                });
            }

        },
        error: function (data) {
            console.log("get_database_batch_list is wrong");
            //console.log(data)
            console.log(data)
            alert("获取数据库和标注批次列表出错，请登陆，或联系管理员")
            //loading.stop()
        }
    });

    // logic for database change
    $("#database_list").change(function () {
        $("#batch_list").empty()
        $.each(g_database_batch_dict_json[g_database_list_json[parseInt($("#database_list").val())]], function (i, batch_name) {
            $("#batch_list").append("<option value=" + i + ">" + batch_name + "</option>");
        });
        $("#seleted_batch").val("当前标注对象序号范围");
        //TODO: add logic to clear all gallery
    })



});


NUM = 50;
//TODO: might reduce global var
g_current_id_index = 0
g_last_label_id_index = -1
g_batch_name_list = []
g_last_label_result_dict_json_list = [
    {
        "is_real_man" : 1,
        "has_vehicle" : -1,
        "has_print" : -1,
        "is_multi_person" : -1,
        "crop_level" : -1,
        "crop_bad_border_level" : -1,
        "occlusion_level" : -1,
        "blur_level" : -1,
        "brightness_level" : -1,
        "pose_level" : -1,
        "contrast_level" : -1,
        "is_after_glass" : -1
    },
    {
        "is_real_man" : 0,
        "has_vehicle" : 1,
        "has_print" : 0,
        "is_multi_person" : 0,
        "crop_level" : -1,
        "crop_bad_border_level" : -1,
        "occlusion_level" : -1,
        "blur_level" : -1,
        "brightness_level" : -1,
        "pose_level" : -1,
        "contrast_level" : -1,
        "is_after_glass" : -1
    }
]


label_item_change_function()

function get_all_data(
    current_database_name,
    current_batch_name,
    current_labelperson_name
) {
    var dataurl='/quality_multi_get_all_data/';

    // using button disable prop as mutex
    if ($("#confirm_current_label").prop("disabled") == true){
        return
    }
    $("#confirm_current_label").prop("disabled",true)

    var data=JSON.stringify({
        current_database_name:current_database_name,
        current_batch_name:current_batch_name,
        current_labelperson_name:current_labelperson_name,
        current_id_index:g_current_id_index,
        last_label_id_index:g_last_label_id_index,
        last_label_result_dict_json_list:g_last_label_result_dict_json_list,
    });
    //https://code.ziqiangxuetang.com/django/django-csrf.html
    jQuery(document).ajaxSend(function(event, xhr, settings) {
        function getCookie(name) {
            var cookieValue = null;
            if (document.cookie && document.cookie != '') {
                var cookies = document.cookie.split(';');
                for (var i = 0; i < cookies.length; i++) {
                    var cookie = jQuery.trim(cookies[i]);
                    // Does this cookie string begin with the name we want?
                    if (cookie.substring(0, name.length + 1) == (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }
        function sameOrigin(url) {
            // url could be relative or scheme relative or absolute
            var host = document.location.host; // host + port
            var protocol = document.location.protocol;
            var sr_origin = '//' + host;
            var origin = protocol + sr_origin;
            // Allow absolute or scheme relative URLs to same origin
            return (url == origin || url.slice(0, origin.length + 1) == origin + '/') ||
                (url == sr_origin || url.slice(0, sr_origin.length + 1) == sr_origin + '/') ||
                // or any other URL that isn't scheme relative or absolute i.e relative.
                !(/^(\/\/|http:|https:).*/.test(url));
        }
        function safeMethod(method) {
            return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
        }

        if (!safeMethod(settings.type) && sameOrigin(settings.url)) {
            xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
        }
    });

    // ajax get_all_data

    $.ajax({
        url:dataurl,
        contentType: "application/json; charset=utf-8",
        data:data,
        type:"POST",
        success:function(data){
            var json_data=JSON.parse(data)

            var labelperson_list = json_data['labelperson_list']

            var batch_id_name_list = json_data['batch_id_name_list']

            var current_30_id_img_url_list = json_data['current_30_id_img_url_list']

            var current_id_index  = json_data['current_id_index_for_front']
            var current_id_index_list  = json_data['current_id_index_list_for_front']
            var current_id_name_list_for_front  = json_data['current_id_name_list_for_front']


            var possible_confict = json_data['possible_confict']

            var current_id_label_result_dict_list = json_data['current_id_label_result_dict_list']

            if (current_labelperson_name == ""){
                $("#label_result_list").empty()

                $.each(labelperson_list, function (i, laberperson_name){
                    $("#label_result_list").append("<option value=" + i + ">" + laberperson_name + "</option>");
                });
                current_labelperson_name = $("#label_result_list").find("option:selected").text()
            }
            //console.log($("#label_result_list").find("option:selected").text())

            if (g_last_label_id_index == -1 || g_current_id_index == 0){
                $("#id_list").empty()
                g_batch_name_list = batch_id_name_list
                $.each(batch_id_name_list, function (i, id_name) {
                    $("#id_list").append("<option value=" + i + ">" + i + "/" + (batch_id_name_list.length-1) + "</option>");
                });
            }
            g_current_id_index = current_id_index
            $("#id_list").val(g_current_id_index);
            $("#seleted_id").val("ID_" + batch_id_name_list[g_current_id_index]);



            for (var i = 0; i < 30; i++) {

                var card_id = "quality_label_card_" + i
                var select_id = "quality_label_list_" + i
                var gallery_father_id = "quality_label_gallery_" + i
                var gallery_id = "nanogallery_" + i

                $('#' + gallery_father_id).html("");
                if (i >= current_30_id_img_url_list.length)
                {
                    $('#' + card_id).hide()
                } else {
                    $('#' + card_id).show()
                }
            }

            for (var i = 0; i < Math.min(30, current_30_id_img_url_list.length); i++) {
                var card_id = "quality_label_card_" + i
                var select_id = "quality_label_list_" + i
                var gallery_father_id = "quality_label_gallery_" + i
                var gallery_id = "nanogallery_" + NUM
                NUM = NUM + 1
                var is_pass_step_one = check_whether_pass_step_one(current_id_label_result_dict_list[i])
                add_image("#"+gallery_father_id, [current_30_id_img_url_list[i]], gallery_id, current_batch_name, current_id_name_list_for_front[i], current_id_index_list[i], is_pass_step_one)
            }

            g_last_label_result_dict_json_list = current_id_label_result_dict_list

            var item_index = parseInt($("#label_item_list").val())
            var item_legend_nums = g_label_item_all_level_in_Chinese_list[item_index].length
            change_label_item_color_and_val(g_last_label_result_dict_json_list, item_index, item_legend_nums)

            $("#confirm_current_label").prop("disabled",false)

            if (possible_confict) {
                alert("标注存在冲突，请再次确认当前标注结果")
            }
        },
        error:function(data){
            console.log("get_video_labelperson_list is wrong");
            //console.log(data)
            console.log(data)
            alert("获取数据出错，请登陆，或联系管理员")
            top.location.reload()
        }
    });
}

function fetch_batch_data() {
    if ($("#batch_list").val().length != 1) {
        alert("请选择一个序号范围")
        return
    }
    $("#seleted_batch").val($("#batch_list").find("option:selected").text());

    // clear global var

    g_current_id_index = 0
    g_last_label_id_index = -1
    g_batch_name_list = []
    g_last_label_result_dict_json_list = []

    // ajax get_all_data
    var current_database_name = $("#database_list").find("option:selected").text().slice(4)
    var current_batch_name = $("#batch_list").find("option:selected").text()

    var current_labelperson_name = ""

    get_all_data(
        current_database_name,
        current_batch_name,
        current_labelperson_name
    )

    $("#label_result_list").change(function (e) {
        if (e.originalEvent) {
            console.log("$(\"#label_result_list\").change(function ()" + $(this).val())

            var current_database_name = $("#database_list").find("option:selected").text().slice(4)
            var current_batch_name = $("#batch_list").find("option:selected").text()
            var current_labelperson_name = $("#label_result_list").find("option:selected").text()

            //switch label_result not save current change
            g_current_id_index = 0
            g_last_label_id_index = -1
            g_batch_name_list = []
            g_last_label_result_dict_json_list = []

            get_all_data(
                current_database_name,
                current_batch_name,
                current_labelperson_name
            )
        }
    })

    $('#id_list').on('change', function(e){
        //console.log("$('#id_list').on('change', function(){")
        if (e.originalEvent) {
            console.log("$('#id_list').on('change', function(){")

            var current_database_name = $("#database_list").find("option:selected").text().slice(4)
            var current_batch_name = $("#batch_list").find("option:selected").text()
            var current_labelperson_name = $("#label_result_list").find("option:selected").text()

            get_data_with_index(
                current_database_name,
                current_batch_name,
                current_labelperson_name
            )

        }
    })

}

function get_data_with_index(
    current_database_name,
    current_batch_name,
    current_labelperson_name
) {
    console.log("$(\"#id_list\").change(function ()" + $('#id_list').val())

    g_last_label_id_index = g_current_id_index
    g_current_id_index = parseInt($('#id_list').val())

    get_all_data(
        current_database_name,
        current_batch_name,
        current_labelperson_name
    )
}

function get_next_id_data(){
    //console.log('$("#scrollContent").scrollTop(0)')
    // $("#scrollContent").scrollTop(0)
    if (g_batch_name_list.length == 0){
        console.log("还没有获取列表")
        return
    }

    if (parseInt($("#id_list").val()) == g_batch_name_list.length - 1 &&
        g_last_label_id_index == g_batch_name_list.length - 1){
        alert("您已标好最后一个ID")
        return
    }

    // console.log("get_next_id_data", $("#id_list").val())
    if (parseInt($("#id_list").val()) == g_batch_name_list.length - 1) {
        $("#id_list").val(parseInt($("#id_list").val()))
    }else{
        $("#id_list").val(parseInt($("#id_list").val()) + 1)
    }

    var current_database_name = $("#database_list").find("option:selected").text().slice(4)
    var current_batch_name = $("#batch_list").find("option:selected").text()
    var current_labelperson_name = $("#label_result_list").find("option:selected").text()

    get_data_with_index(
        current_database_name,
        current_batch_name,
        current_labelperson_name
    )
    // console.log("get_next_id_data", $("#id_list").val())
}


function check_whether_step_one_all_labeled(one_label_result) {
    var is_step_one_labeled = false
    // assume dict is complete
    if (
        one_label_result['is_real_man'] >= 0 &&
        one_label_result['has_vehicle'] >= 0 &&
        one_label_result['has_print'] >= 0 &&
        one_label_result['is_multi_person'] >= 0
    ){
        is_step_one_labeled = true
    }
    return is_step_one_labeled
}
function get_next_label_item() {
    var current_label_item_index = parseInt($("#label_item_list").val())
    if (current_label_item_index == 11)
        return
    $("#label_item_list").val(current_label_item_index + 1)
    label_item_change_function()
}

function get_last_label_item() {
    var current_label_item_index = parseInt($("#label_item_list").val())
    if (current_label_item_index == 0)
        return
    $("#label_item_list").val(current_label_item_index - 1)
    label_item_change_function()
}

function check_whether_pass_step_one(one_label_result) {
    var is_step_one_labeled = check_whether_step_one_all_labeled(one_label_result)
    if (is_step_one_labeled == false){
        // logic is that not labeled is not pass， wield
        return false
    }
    var is_pass_step_one = true
    if (
        one_label_result['is_real_man'] > 0 ||
        one_label_result['has_vehicle'] > 0 ||
        one_label_result['has_print'] > 0 ||
        one_label_result['is_multi_person'] > 0
    ){
        is_pass_step_one = false
    }
    return is_pass_step_one
}

function add_image(select, src_set, idname, current_video_name, current_id_name, current_id_index, pass_step_one) {
    //add_search_image('.selected_image',src_array,"nanogallery0");
    $(select).html('<div id="' + idname + '" style="margin-top: 0px"></div>');
    var items = Array();
    $.each(src_set, function (i, src) {
        if (pass_step_one){
            items.push({
                src: src,
                srct:src,
                title: "",
                description: "index_" + current_id_index + "_id_name_" + current_id_name,
            })
        }else{
            items.push({
                src: src,
                srct:src,
                title: "未通过第一步",
                description: "index_" + current_id_index + "_id_name_" + current_id_name,
            })
        }

    });
    //jQuery("#" + idname).nanogallery2('destroy')
    jQuery("#" + idname).nanogallery2({
        <!-- ### gallery settings ### -->
        "colorScheme": {
            "thumbnail": {
                "background": "rgba(255,255,255,1)",
                "borderColor": "rgba(217,237,247,1)"
            }
        },
        "thumbnailAlignment": "center",
        "thumbnailBorderVertical": 1,
        "thumbnailBorderHorizontal": 1,
        "thumbnailHoverEffect2": "image_scale_1.0_1.1",
        "thumbnailHeight": 190,
        "thumbnailWidth": 110,
        "galleryResizeAnimation ":false,
        /*"thumbnailLabel": {
            "align": "left",
            "position": "onBottom",
            "displayDescription": false,
        },*/
        "galleryMaxRows": 1,
        "thumbnailLabel": {"position": "overImageOnBottom", "hideIcons": true, "display": true},
        "galleryDisplayMode": "pagination",
        //"galleryPaginationMode": "numbers",
        //"displayDescription": false,
        "thumbnailGutterWidth": 5,
        "thumbnailOpenImage": true,
        "thumbnailCrop": false,
        "eventsDebounceDelay":0,
        "galleryRenderDelay":0,
        "thumbnailDisplayInterval":0,
        "thumbnailDisplayTransition":"fadeIn",
        "thumbnailDisplayOutsideScreen":false,
        "galleryDisplayTransitionDuration":0,
        "thumbnailSliderDelay":0,
        "displayBreadcrumb":false,
        //"thumbnailCrop": false,
        /*"thumbnailGutterWidth": 25,
        "thumbnailGutterHeight": 20,
        "itemsBaseURL": "",
        thumbnailToolbarImage: {topLeft: 'cart'},*/
        //icons: {
        //    thumbnailCart: '<span class="fa-stack fa-sm" ><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-plus fa-stack-1x fa-inverse" onclick="select_query_image(this)"></i></span>'
        //},
        //"fnThumbnailInit": ImgDisplayed,
        items: items

    });
}